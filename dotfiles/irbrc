require 'rubygems' # only needed in 1.8
require 'irb/completion'
require 'irb/ext/save-history'
require 'pp'

%w[map_by_method what_methods].each do |gem|
  begin
    require gem
  rescue LoadError
    puts "Missing #{gem}, gem install #{gem}"
  end
end

IRB.conf[:SAVE_HISTORY] = 100
IRB.conf[:HISTORY_FILE] = "#{ENV['HOME']}/.irb-save-history"
IRB.conf[:PROMPT_MODE]  = :SIMPLE
IRB.conf[:AUTO_INDENT]=true

def h
   puts Readline::HISTORY.entries[0..-2].join("\n")
end

def paste
  `pbpaste`
end

def local_methods(obj = self)
  (obj.methods - obj.class.superclass.instance_methods).sort
end

if defined? Bundler
  Gem.post_reset_hook.reject! do |hook|
    hook.source_location.first =~ %r{/bundler} 
  end
  Gem::Specification.reset
  load 'rubygems/custom_require.rb'
end

require 'irbtools'
require 'interactive_editor'

# Just for Rails...
load "#{ENV['HOME']}/bin/dotfiles/railsrc" if $0 == 'irb' && ENV['RAILS_ENV']

